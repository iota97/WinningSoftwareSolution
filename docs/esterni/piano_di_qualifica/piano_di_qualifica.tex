\documentclass[a4paper, 12pt]{article}
\usepackage{amsmath}
\usepackage{pgfplots}
\usepackage{tabularx}
\usepgfplotslibrary{dateplot}

\newcommand{\templates}{../../template}
\input{\templates/style}
\input{\templates/front_page}
\input{\templates/history}

\settitolo{Piano di Qualifica}
\setredattori{Raffaele Oliviero \\ Elia Scandaletti \\ Giovanni Cocco}
\setdestuso{esterno}
\setdescrizione{
Questo documento serve a definire le metriche e i criteri di accettazione dei prodotti.
}

\addversione{0.0.0}{09/01/2021}{Raffaele Oliviero}{Redazione}{Stesura iniziale.}
\addversione{0.0.1}{16/01/2021}{Elia Scandaletti}{Redazione}{Correzione indice di Gulpease.}
\addversione{0.0.2}{16/01/2021}{Giovanni Cocco}{Redazione}{Migliorata la leggibilità.}
\addversione{0.0.3}{04/02/2021}{Giovanni Cocco}{Redazione}{Stesura iniziale sezione software.}
\addversione{0.0.4}{21/02/2021}{Giovanni Cocco}{Redazione}{Aggiunta dashboard al docuemento.}

\begin{document}

\makefrontpage

\makeversioni

\tableofcontents
\clearpage

\section{Qualità di prodotto}

\subsection{Analisi statica}
\subsubsection{Indice di Gulpease}
\[ \text{Indice di Gulpease} = 89 + \frac{300*\text{\#frasi} - 10*\text{\#lettere}}{\text{\#parole}} \]
\begin{itemize}
	\item \#lettere: numero di caratteri alfanumerici;
	\item \#parole: numero di gruppi di caratteri alfanumerici;
	\item \#frasi: numero di gruppi di punti o punti e virgola consecutivi.
\end{itemize}

\subparagraph{Prodotti coinvolti:}
\begin{center}
	\begin{tabularx}{\textwidth}{|X|X|}
		\hline
		\textbf{Prodotto} & \textbf{Valore minimo } \\
		\hline
		Documenti interni & 40                      \\
		\hline
		Documenti esterni & 50                      \\
		\hline
	\end{tabularx}\\[8pt]
	\mbox{}\\
\end{center}

\subparagraph{Strumenti utilizzati:}
\begin{itemize}
	\item Python - \texttt{textract}.
\end{itemize}

\subparagraph{Andamento:}
\begin{center}
	\begin{tikzpicture}
		\pgfplotsset{width=0.8\textwidth}
		\begin{axis}[
				title = {Prodotti esterni},
				axis x line = none,
				axis y line = none,
				ymin = 0, ymax = 100
			]
			\addplot [red]{40}; \label{min}
		\end{axis}
		\begin{axis}[
				date coordinates in = x,
				xticklabel =	\year-\month-\day,
				x tick label style = {
						font = \small,
						text width = 1.9cm,
						align = center,
						rotate = 70,
						anchor = north east
					},
				xtick = data,
				ymin = 0, ymax = 100
			]
			\addlegendimage{/pgfplots/refstyle=min}
			\addlegendentry{Minimo}
			\addplot coordinates {
					(2022-03-22, 50)
					(2022-03-23, 60)
					(2022-03-30, 55)
				};\addlegendentry{Documento test}
		\end{axis}
	\end{tikzpicture}
\end{center}

\begin{center}
	\begin{tikzpicture}
		\pgfplotsset{width=0.8\textwidth}
		\begin{axis}[
				title = {Prodotti esterni},
				axis x line = none,
				axis y line = none,
				ymin = 0, ymax = 100
			]
			\addplot [red]{50}; \label{min}
		\end{axis}
		\begin{axis}[
				date coordinates in = x,
				xticklabel =	\year-\month-\day,
				x tick label style = {
						font = \small,
						text width = 1.9cm,
						align = center,
						rotate = 70,
						anchor = north east
					},
				xtick = data,
				ymin = 0, ymax = 100
			]
			\addlegendimage{/pgfplots/refstyle=min}
			\addlegendentry{Minimo}
			\addplot coordinates {
					(2022-03-22, 50)
					(2022-03-23, 60)
					(2022-03-30, 55)
				};\addlegendentry{Documento test}
		\end{axis}
	\end{tikzpicture}
\end{center}

\subparagraph{Riferimenti:} \underline{\href{http://www.corrige.it/leggibilita/lindice-gulpease/}{http://www.corrige.it/leggibilita/lindice-gulpease/}}

\subsection{Analisi dinamica}

\subsubsection{Copertura di codice}
La metrica si basa sullo statement coverage.

\subparagraph{Prodotti coinvolti:}
\begin{center}
	\begin{tabularx}{\textwidth}{|X|X|}
		\hline
		\textbf{Prodotto} & \textbf{Valore minimo } \\
		\hline
		Software          & 80\%                    \\
		\hline
	\end{tabularx}\\[8pt]
	\mbox{}\\
\end{center}

\subparagraph{Strumenti utilizzati:} \begin{itemize}
	\item Jest;
	\item JSCoverage;
	\item truffle.
\end{itemize}

\subparagraph{Andamento:}
\begin{center}
	\begin{tikzpicture}
		\pgfplotsset{width=0.8\textwidth}
		\begin{axis}[
				title = {Statement Coverage},
				axis x line = none,
				axis y line = none,
				ymin = 0, ymax = 100
			]
			\addplot [red]{80}; \label{min}
		\end{axis}
		\begin{axis}[
				date coordinates in = x,
				xticklabel =	\year-\month-\day,
				x tick label style = {
						font = \small,
						text width = 1.9cm,
						align = center,
						rotate = 70,
						anchor = north east
					},
				xtick = data,
				ymin = 0, ymax = 100
			]
			\addlegendimage{/pgfplots/refstyle=min}
			\addlegendentry{Minimo}
			\addplot coordinates {
					(2022-03-22, 10)
				};\addlegendentry{WebApp - frontend}
			\addplot coordinates {
					(2022-03-22, 100)
				};\addlegendentry{Server - backend}
			\addplot coordinates {
					(2022-03-22, 95)
				};\addlegendentry{Contratto}
		\end{axis}
	\end{tikzpicture}
\end{center}

\section{Qualità di processo}
\end{document}