\documentclass[a4paper, 12pt]{article}

\newcommand{\templates}{../../template}
\input{\templates/style}
\input{\templates/front_page}
\input{\templates/history}
\usepackage{hyperref}
\usepackage{graphicx}
\usepackage{placeins}
\usepackage{listings}
\settitolo{Manuale E-commerce Shop Chain}
\setredattori{WinningSoftwareSolution}
\setdestuso{esterno}
\setdescrizione{
Manuale e-commerce.
}
\addversione{0.1.0}{13/04/2022}{Federico Marchi}{Redazione}{Stesura iniziale}
\addversione{1.0.0}{07/04/2022}{Federico Marchi}{Redazione}{Stesura finale}
\begin{document}

\makefrontpage
\makeversioni
\tableofcontents
\newpage

\section{Introduzione}
Attraverso l'utilizzo della blockchain \textit{Polygon}, Shop Chain fornisce un sistema decentralizzato per il pagamento di prodotti in MATIC. Utilizzando Shop Chain è possibile effettuare una qualsiasi attività di compravendita in maniera sicura per entrambi gli attori dello scambio. L'acquirente che desidera acquistare un prodotto da un venditore in un e-commerce potrà effettuare il suo pagamento in MATIC, ovvero il token nativo della blockchain \textit{Polygon}. Il venditore non può disporre immediatamente del saldo ricevuto poiché sarà bloccato fino alla ricezione del pacco, momento nel quale l'acquirente può sbloccare i fondi attraverso la scannerizzazione di un codice QR presente sulla scatola.
\\Il presente documento ha la funzione di descrivere in dettaglio la procedura da seguire per l'e-commerce al fine di vendere correttamente i propri prodotti.

\newpage
\section{Configurazione wallet}
\subsection{Wallet Metamask}
Per poter usufruire a pieno del nostro servizio sarà necessario l'utilizzo di un wallet Metamask. Visitare \href{https://www.metamask.io}{metamask.io} per maggiori informazioni.
\subsubsection{Configurazione}
Il wallet Metamask imposta il network di Ethereum come rete predefinita, Shop Chain invece utilizza il network di Polygon. Se il network Polygon non è gia stato inserito nel proprio wallet Metamask, procedere con la lettura del seguente paragrafo.
\\Per l'inserimento e la configurazione della corretta rete nel proprio wallet Metamask è necessario recarsi sulla sezione "Networks" e selezionare l'opzione "Add Network". Successivamente inserire i seguenti dati:
\begin{itemize}
\item Network Name: \textbf{Matic Mainnet};
\item New RPC Url: \textbf{https://rpc-mainnet.maticvigil.com/};
\item ChainID: \textbf{137};
\item Currency Symbol: \textbf{MATIC};
\item Block Explorer URL: \textbf{https://explorer.matic.network/}.
\end{itemize}
Una volta inseriti i dati e aggiunto il network, ricordare di selezionarlo.

\subsubsection{Collegamento a Shop Chain}
Una volta inserito correttamente il network è necessario collegare il proprio wallet metamask a Shop Chain. Nella webapp di Shop Chain, se non si ha già collegato in precedenza il proprio wallet:
\begin {itemize}
\item selezionare "Connect Wallet" all'apertura del pop-up (Fig. 1);
\item approvare il collegamento direttamente dall'estensione di Metamask.
\end{itemize}

\FloatBarrier
\begin{figure}[!h]
\centering
\includegraphics[width=0.5\linewidth]{img/connessione_wallet.png}
\caption{Connessione del wallet Metamask a Shop Chain.}
\end{figure}
\FloatBarrier

\section{Visualizzazione e gestione transazioni}
La web app di Shop Chain permette di visualizzare tutte le transazioni ricevute in entrata da un determinato wallet.\\
Per poter visualizzare le transazioni ricevute da un e-commerce in entrata, è necessario recarsi nella sezione \textbf{Incoming} (Fig. 2) su Shop Chain. In questa sezione è possibile visualizzare la lista delle vendite effettuate attraverso Shop Chain, il prezzo di ciascuna, la data di vendita e lo stato attuale della transazione.
\FloatBarrier
\begin{figure}[!h]
\centering
\includegraphics[width=0.8\linewidth]{img/incoming.png}
\caption{Sezione Incoming.}
\end{figure}
\FloatBarrier
\subsection{Dettagli transazione}
Selezionando una transazione è possibile visualizzare le seguenti informazioni (Fig. 3 riquadro 1):
\begin{itemize}
  \item \textbf{Price:} indica il prezzo dell'istanza di pagamento;
  \item \textbf{From:} indica l'address del wallet dell'acquirente;
  \item \textbf{To:} indica l'address del proprio wallet, ovvero il wallet che ha ricevuto il pagamento;
  \item \textbf{Opened:} indica la data in cui è stato eseguito l'acquisto;
  \item \textbf{Expire:} indica la data in cui scade l'ordine e in cui i fondi vengono automaticamente rimborsati, si tratta di 14 giorni dopo l'acquisto.
  \item \textbf{Stato dell'ordine}:
  \begin{itemize}
    \item \textbf{Open}: l'ordine è ancora aperto e in attesa di conferma;
    \item \textbf{Confirmed}: l'ordine è già stato confermato attraverso la scannerizzazione del codice QR dall'acquirente;
    \item \textbf{Expired}: l'utente ha chiesto il refund poiché non ha ricevuto il pacco entro 14 giorni;
    \item \textbf{Canceled}: l'ordine è stato rifiutato dall'e-commerce. I fondi utilizzati per il pagamento vengono restituiti all'acquirente nella valuta stabile DAI.
  \end{itemize}
\end{itemize}
\subsection{Gestione transazione}
Per ciascuna vendita l'e-commerce può scegliere se (Fig. 3 riquadro 2):
\begin{itemize}
  \item \textbf{Accettare il pagamento:} l'e-commerce che decide di accettare il pagamento deve necessariamente seguire la procedura sotto riportata per permettere all'acquirente di sbloccare i fondi nel momento della ricezione del pacco.\\
  La procedura prevede di:
  \begin{itemize}
    \item Selezionare l'opzione "Download QR";
    \item stampare il codice QR scaricato in formato .png;
    \item attaccare la stampa del codice QR sul pacco contenente l'oggetto acquistato prima di spedirlo.
  \end{itemize}
  Una volta spedito il pacco è necessario aspettare la ricezione e lo sblocco fondi da parte dell'acquirente. Se il pacco non viene spedito l'acquirente riceverà il rimborso in DAI dopo 14 giorni dall'acquisto.\\
  \item \textbf{Annullare il pagamento:} l'e-commerce che decide di annullare il pagamento deve selezionare l'opzione "Cancel transaction". L'acquirente viene rimborsato in DAI con l'esatto importo pagato al momento dell'acquisto.
\end{itemize}
\FloatBarrier
\begin{figure}[!h]
\centering
\includegraphics[width=0.7\linewidth]{img/transazione_venditore.png}
\caption{Visualizzazione e gestione vendite.}
\end{figure}
\FloatBarrier
\end{document}